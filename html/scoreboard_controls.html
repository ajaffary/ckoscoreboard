<!--
    Websockets code generated by ChatGPT:
    https://chatgpt.com/share/6771d56d-ed1c-8000-99e0-4a91db08f053

    CKO Scoreboard controls
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="scoreboard_controls.css">
    <title id="scoreboard-controls">Scoreboard Controls</title>
</head>
<body>   
    <h1 id="scoreboard-controls-header">Scoreboard Controls</h1>

    <hr/>

    <!-- Chat Window between Scoreboard Announcers and Scoreboard Controls -->
    <div id="chat-container">
        <p id="incoming-chat-container">
            <label for="incoming-chat">Incoming Chat</label>
            <textarea id="incoming-chat" rows="5" cols="40" readonly></textarea>
        </p>
        <p id="outgoing-chat-container">
            <label for="outgoing-chat">Outgoing Chat</label>
            <textarea id="outgoing-chat" data-targetid="scoreboard-announcers" 
            rows="2" cols="40" placeholder="Type a message"></textarea>
        </p>
        <button id="send-chat-button" 
                type="button" onclick="sendChat()">
                Send Message
        </button>
    </div>
    
    <hr>

    <!-- Game Clock -->
    <div id="game-clock-container">
        <p id="game-clock-name">Game Clock</p>
        <p id="game-clock">
            <span id="game-clock-minutes">30</span>:<span id="game-clock-seconds">00</span>
        </p>
    </div>

    <div id="game-clock-controls">
        <p id="game-clock-start-stop-reset">
            <button type="button" id="start-game-clock" 
                    onclick="startGameClock()">
                    Start Game Clock
            </button>
            <button type="button" id="stop-game-clock" 
                    onclick="stopGameClock()">
                    Stop Game Clock
            </button>
            <button type="button" id="reset-game-clock" 
                    onclick="resetGameClock()">
                    Reset Game Clock
            </button>
        </p>
        <p id="game-clock-inputs">
            <label for="game-clock-minutes-input">MIN</label>
            <input 
                type="number" 
                class="game-clock" 
                name="game-clock-minutes-input" 
                maxlength="2em" 
                id="game-clock-minutes-input" 
                min="0" 
                max="60"
                aria-label="Game Clock Minutes Input" 
                value="30">
            <label for="game-clock-seconds-input">SEC</label>
            <input 
                type="number" 
                class="game-clock" 
                name="game-clock-seconds-input" 
                maxlength="2em" 
                id="game-clock-seconds-input" 
                min="00" 
                max="59"
                aria-label="Game Clock Seconds Input" 
                value="0">
            <button type="button" id="update-game-clock-button" 
                    onclick="updateGameClock()">
                    Update Game Clock
            </button>
        </p>
    </div>

    <hr />

    <!-- Jam Number -->
    <div id="jam-number-controls">
        <p id="jam-number-name">Jam Number</p>
        <p id="jam-number">0</p>
        <p id="jam-number-buttons">
            <button 
                type="button" id="subtract-1-jam-number" 
                onclick="addToJam()">
                &minus;1
            </button>
            <button type="button" id="add-1-jam-number" 
                    onclick="addToJam()">
                    +1
            </button>
        </p>
        <p id="jam-number-inputs">
            <input  type="number" class="score" name="jam-number-input" 
                    maxlength="2em" id="jam-number-input"
                    aria-label="Jam Number Input" placeholder="0">
            <button type="button" id="update-jam-number" 
                    onclick="updateJamNumber()">
                    Update Jam Number
            </button>
            <button type="button" id="reset-jam-number"
                    onclick="resetJamNumber()">
                    Reset Jam Number
            </button>
        </p>
    </div>

    <hr/>

    <!-- Home Team and Away Team Score Buttons -->
    <script type="text/javascript" src="../js/scoreboard_controls/scoreboard_elements.js">
        // Create the scoreboard text elements
    </script>
    <script type="text/javascript" src="../js/scoreboard_controls/scoreboard_increment_buttons.js">
        // Create the scoreboard increment buttons
    </script>

    <hr/>

    <!-- Time Out -->
    <div id="timeout-controls">
        <p id="timeout-name">Time Out</p>
        <p id="timeout" data-status="false" style="visibility: hidden">TIME OUT</p>
        <p id="timeout-buttons">
            <button type="button" id="timeout-button" 
                    onclick="TimeOut()">
                    Time Out
            </button>
            <button type="button" id="clear-timeout-button" 
                    onclick="clearTimeOut()">
                    Clear Time Out
            </button>
            <button type="button" id="update-timeout-button"
                    onclick="updateTimeOut()">
                    Update Time Out
            </button>
        </p>
    </div>

    <hr>

    <!-- Game Updates -->
    <div id="game-update-controls">
        <p id="game-segment-name">Game Segment</p>
        <p id="game-segment">PERIOD 1</p>
        <p id="toggle-period">
            <button type="button" id="toggle-period-button" 
                    onclick="togglePeriod()">
                    Toggle P1 / P2
            </button>
        </p>

        <p id="end-period-1">
            <!-- End of Period 1 
            <button type="button" id="end-period-1-button" 
                    onclick="endPeriod()">
                    End of Period 1
            </button>
            -->
            <!-- Halftime -->
            <button type="button" id="halftime-button" 
                    onclick="halfTime()">
                    Halftime
            </button>            
        </p>
        
        <p id="end-period-2">
            <!-- End of Period 2 
            <button type="button" id="end-period-2-button" 
                    onclick="endPeriod()">
                    End of Period 2
            </button>
            -->
            <!-- Final Score -->
            <button type="button" id="final-score-button"
                    onclick="displayFinalScore()">
                    Final Score
            </button>
        </p>
        
        <!-- <p id="clear">
            <button type="button" id="clear-button"
                    onclick="clear()">
                    Clear Game Segment
            </button>
        </p>
        -->
        <p id="update-segment">
            <button type="button" id="update-game-segment-button"
                    onclick="updateGameSegment()">
                    Update Game Segment
            </button>
            <span id="update-message-alert">&nbsp;</span>
        </p>
    </div>

    <hr/>

    <script type="text/javascript" src="../js/scoreboard_controls/scoreboard_update_methods.js">
        // Scoreboard increment button control functions
    </script>

    <script type="text/javascript" src="../js/scoreboard_controls/shared_elements.js">
        // references to shared elements
    </script>

    <script type="text/javascript" src="../js/initialize_client.js">
        // Initialize the websocket connection
        // Transmit unique ID
    </script>

    <script type="text/javascript" src="../js/scoreboard_controls/game_clock.js">
        // Game Clock Controls
    </script>

    <script type="text/javascript" src="../js/source_clients/scoreboard-scores-client.js">
        // Send score updates updates to server
    </script>

    <script type="text/javascript" src="../js/source_clients/scoreboard-timers-client.js">
        // Send jam and game event updates to server
    </script>

    <!-- Chat Methods between Scoreboard Announcers and Scoreboard Controls -->
    <script type="text/javascript" src="../js/target_clients/chat_methods.js">
        // Chat methods for sending messages
    </script>

    <script type="text/javascript">
        // handle incoming chat messages from server
        // handle incoming 'ready' messages from server
        // with specific client ID
        // note:  issue with providing client ID is all update
        // methods go to both targets by default
        // will an update 
        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            console.log(`Message received: ${data}`);
            console.log(`Message type: ${data.type}`);
            if (data.type === 'chat') {
                // this should be a chat message only going to scoreboard_controls
                // as specified by ID in incoming message from scoreboard_announcers
                const incomingChat = document.getElementById('incoming-chat');
                incomingChat.value += `${data.senderId}: ${data.content}\n`;
            } else if (data.type === 'error') {
                alert(data.message);
            } 
        };
    </script>

    <script type="text/javascript" src="../js/refresh_check.js"></script>

    <script type="text/javascript" 
            src="../js/scoreboard_controls/scoreboard_state_methods.js">
    </script>

    <hr/>
</body>
</html>